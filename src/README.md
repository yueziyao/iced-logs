## 启动DEMO

1 node bin/www
2 访问: http://localhost:8081 (这个页面是模拟数据上报的链接样式和说明)

## 探针配置方法见

static/ulog/test.html (里面有很多的配置, 如果只需要最简单的基础功能, 可以不需要这些配置)

## 最基础的配置

window.ulog = window.ulog || function(){};
ulog('load', function() {
        // 设置别名
        ulog('set', 'alias', {
            speed: './speed.js',
            monkey: './monkey.js',
            feature: './feature.js',
            csp: './csp.js'
        });
        // 初始化探针
        ulog('init', ['speed', 'monkey', 'feature', 'csp']);
});

## 探针架构

调度器: ulog.js  (调度器, 探针插件化设计, 方便后续扩展不同类型的探针, 原生不依赖第三方库)
性能探针: speed.js (探测性能/用户设备信息等, 依赖performance.timing, 不支持的可以用自定义打点)
点击流: monkey.js  (采集用户点击的元素/元素的位置/元素的祖先元素/元素的大小等信息, 方便后期做热力图点击图什么的)
新特性: feature.js (采集用户对新特性的支持程度)
XSS检测: csp.js    (监测跨站劫持脚本的存在, 并且发送告警日志, 内联的攻击脚本监测不到, 并且性能开销比较大, 需要定时去扫描页面, 定时扫的逻辑目前没加)

## JS监控架构

0 规划好页面ID/产品线ID (后期可以通过在平台生成ID的方式做产品线管理和权限管理, 通过ID区分是哪条产品线的哪个页面)
1 前端上报监测代码 (图片的方式)
2 服务器nginx记录access.log (日志量很大, 可以分多台)
3 持久化
  1) 通过脚本定时(例如1小时)去跑nginx日志
  2) 简单分析分类nginx日志并且分类写入DB

4 对DB原始数据进行分析计算(这一块比较烦, 要计算海量的数据), 并且把计算结果写入另一个数据库 (实时性要求不高的话也可以跑脚本去做)
5 开发数据指标展示平台, 把计算好的数据绘制成各种图表

## 其他
其他的自己看下代码吧,  都不复杂, 但是可能有bug和设计不完善的地方, 需要再定制一次



